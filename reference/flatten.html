<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Flatten or squash a list of lists into a simpler vector — flatten • rlang</title>

<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min.js" integrity="sha256-hIvIxeqhGZF+VVeM55k0mJvWpQ6gTkWk3Emc+NmowYA=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Flatten or squash a list of lists into a simpler vector — flatten" />

<meta property="og:description" content="
flatten() removes one level hierarchy from a list, while
squash() removes all levels. These functions are similar to
unlist() but they are type-stable so you always know what the
type of the output is." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rlang</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../reference/lifecycle.html">Life cycle</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/rlang">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Flatten or squash a list of lists into a simpler vector</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/rlang/blob/master/R/vec-squash.R'><code>R/vec-squash.R</code></a></small>
    <div class="hidden name"><code>flatten.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><a href='https://www.tidyverse.org/lifecycle/#questioning'><img src='figures/lifecycle-questioning.svg' alt='Questioning lifecycle'></a></p>
<p><code>flatten()</code> removes one level hierarchy from a list, while
<code>squash()</code> removes all levels. These functions are similar to
<code>unlist()</code> but they are type-stable so you always know what the
type of the output is.</p>
    
    </div>

    <pre class="usage"><span class='fu'>flatten</span>(<span class='no'>x</span>)

<span class='fu'>flatten_lgl</span>(<span class='no'>x</span>)

<span class='fu'>flatten_int</span>(<span class='no'>x</span>)

<span class='fu'>flatten_dbl</span>(<span class='no'>x</span>)

<span class='fu'>flatten_cpl</span>(<span class='no'>x</span>)

<span class='fu'>flatten_chr</span>(<span class='no'>x</span>)

<span class='fu'>flatten_raw</span>(<span class='no'>x</span>)

<span class='fu'>squash</span>(<span class='no'>x</span>)

<span class='fu'>squash_lgl</span>(<span class='no'>x</span>)

<span class='fu'>squash_int</span>(<span class='no'>x</span>)

<span class='fu'>squash_dbl</span>(<span class='no'>x</span>)

<span class='fu'>squash_cpl</span>(<span class='no'>x</span>)

<span class='fu'>squash_chr</span>(<span class='no'>x</span>)

<span class='fu'>squash_raw</span>(<span class='no'>x</span>)

<span class='fu'>flatten_if</span>(<span class='no'>x</span>, <span class='kw'>predicate</span> <span class='kw'>=</span> <span class='no'>is_spliced</span>)

<span class='fu'>squash_if</span>(<span class='no'>x</span>, <span class='kw'>predicate</span> <span class='kw'>=</span> <span class='no'>is_spliced</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A list to flatten or squash. The contents of the list can
be anything for unsuffixed functions <code>flatten()</code> and <code>squash()</code>
(as a list is returned), but the contents must match the type for
the other functions.</p></td>
    </tr>
    <tr>
      <th>predicate</th>
      <td><p>A function of one argument returning whether it
should be spliced.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>flatten()</code> returns a list, <code>flatten_lgl()</code> a logical
vector, <code>flatten_int()</code> an integer vector, <code>flatten_dbl()</code> a
double vector, and <code>flatten_chr()</code> a character vector. Similarly
for <code>squash()</code> and the typed variants (<code>squash_lgl()</code> etc).</p>
    
    <h2 class="hasAnchor" id="life-cycle"><a class="anchor" href="#life-cycle"></a>Life cycle</h2>

    
    <p>These functions are in the questioning stage. They have slightly
different semantics than the flattening functions in purrr and we
are currently rethinking our approach to flattening with the new
typing facilities of the vctrs package.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>replicate</span>(<span class='fl'>2</span>, <span class='fu'>sample</span>(<span class='fl'>4</span>), <span class='kw'>simplify</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>x</span></div><div class='output co'>#&gt; [[1]]
#&gt; [1] 4 1 3 2
#&gt; 
#&gt; [[2]]
#&gt; [1] 2 1 3 4
#&gt; </div><div class='input'>
<span class='fu'>flatten</span>(<span class='no'>x</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] 4 1 3 2
#&gt; 
#&gt; [[2]]
#&gt; [1] 2 1 3 4
#&gt; </div><div class='input'><span class='fu'>flatten_int</span>(<span class='no'>x</span>)</div><div class='output co'>#&gt; [1] 4 1 3 2 2 1 3 4</div><div class='input'>
<span class='co'># With flatten(), only one level gets removed at a time:</span>
<span class='no'>deep</span> <span class='kw'>&lt;-</span> <span class='fu'>list</span>(<span class='fl'>1</span>, <span class='fu'>list</span>(<span class='fl'>2</span>, <span class='fu'>list</span>(<span class='fl'>3</span>)))
<span class='fu'>flatten</span>(<span class='no'>deep</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] 1
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [[3]][[1]]
#&gt; [1] 3
#&gt; 
#&gt; </div><div class='input'><span class='fu'>flatten</span>(<span class='fu'>flatten</span>(<span class='no'>deep</span>))</div><div class='output co'>#&gt; [[1]]
#&gt; [1] 1
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [1] 3
#&gt; </div><div class='input'>
<span class='co'># But squash() removes all levels:</span>
<span class='fu'>squash</span>(<span class='no'>deep</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] 1
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [1] 3
#&gt; </div><div class='input'><span class='fu'>squash_dbl</span>(<span class='no'>deep</span>)</div><div class='output co'>#&gt; [1] 1 2 3</div><div class='input'>
<span class='co'># The typed flatten functions remove one level and coerce to an atomic</span>
<span class='co'># vector at the same time:</span>
<span class='fu'>flatten_dbl</span>(<span class='fu'>list</span>(<span class='fl'>1</span>, <span class='fu'>list</span>(<span class='fl'>2</span>)))</div><div class='output co'>#&gt; [1] 1 2</div><div class='input'>
<span class='co'># Only bare lists are flattened, but you can splice S3 lists</span>
<span class='co'># explicitly:</span>
<span class='no'>foo</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='set_attrs.html'>set_attrs</a></span>(<span class='fu'>list</span>(<span class='st'>"bar"</span>), <span class='kw'>class</span> <span class='kw'>=</span> <span class='st'>"foo"</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: `set_attrs()` is soft-deprecated as of rlang 0.3.0</span>
#&gt; <span class='warning'>This warning is displayed once per session.</span></div><div class='input'><span class='fu'>str</span>(<span class='fu'>flatten</span>(<span class='fu'>list</span>(<span class='fl'>1</span>, <span class='no'>foo</span>, <span class='fu'>list</span>(<span class='fl'>100</span>))))</div><div class='output co'>#&gt; List of 3
#&gt;  $ : num 1
#&gt;  $ :List of 1
#&gt;   ..$ : chr "bar"
#&gt;   ..- attr(*, "class")= chr "foo"
#&gt;  $ : num 100</div><div class='input'><span class='fu'>str</span>(<span class='fu'>flatten</span>(<span class='fu'>list</span>(<span class='fl'>1</span>, <span class='fu'><a href='splice.html'>splice</a></span>(<span class='no'>foo</span>), <span class='fu'>list</span>(<span class='fl'>100</span>))))</div><div class='output co'>#&gt; List of 3
#&gt;  $ : num 1
#&gt;  $ : chr "bar"
#&gt;  $ : num 100</div><div class='input'>
<span class='co'># Instead of splicing manually, flatten_if() and squash_if() let</span>
<span class='co'># you specify a predicate function:</span>
<span class='no'>is_foo</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'>inherits</span>(<span class='no'>x</span>, <span class='st'>"foo"</span>) <span class='kw'>||</span> <span class='fu'><a href='bare-type-predicates.html'>is_bare_list</a></span>(<span class='no'>x</span>)
<span class='fu'>str</span>(<span class='fu'>flatten_if</span>(<span class='fu'>list</span>(<span class='fl'>1</span>, <span class='no'>foo</span>, <span class='fu'>list</span>(<span class='fl'>100</span>)), <span class='no'>is_foo</span>))</div><div class='output co'>#&gt; List of 3
#&gt;  $ : num 1
#&gt;  $ : chr "bar"
#&gt;  $ : num 100</div><div class='input'>
<span class='co'># squash_if() does the same with deep lists:</span>
<span class='no'>deep_foo</span> <span class='kw'>&lt;-</span> <span class='fu'>list</span>(<span class='fl'>1</span>, <span class='fu'>list</span>(<span class='no'>foo</span>, <span class='fu'>list</span>(<span class='no'>foo</span>, <span class='fl'>100</span>)))
<span class='fu'>str</span>(<span class='no'>deep_foo</span>)</div><div class='output co'>#&gt; List of 2
#&gt;  $ : num 1
#&gt;  $ :List of 2
#&gt;   ..$ :List of 1
#&gt;   .. ..$ : chr "bar"
#&gt;   .. ..- attr(*, "class")= chr "foo"
#&gt;   ..$ :List of 2
#&gt;   .. ..$ :List of 1
#&gt;   .. .. ..$ : chr "bar"
#&gt;   .. .. ..- attr(*, "class")= chr "foo"
#&gt;   .. ..$ : num 100</div><div class='input'>
<span class='fu'>str</span>(<span class='fu'>squash</span>(<span class='no'>deep_foo</span>))</div><div class='output co'>#&gt; List of 4
#&gt;  $ : num 1
#&gt;  $ :List of 1
#&gt;   ..$ : chr "bar"
#&gt;   ..- attr(*, "class")= chr "foo"
#&gt;  $ :List of 1
#&gt;   ..$ : chr "bar"
#&gt;   ..- attr(*, "class")= chr "foo"
#&gt;  $ : num 100</div><div class='input'><span class='fu'>str</span>(<span class='fu'>squash_if</span>(<span class='no'>deep_foo</span>, <span class='no'>is_foo</span>))</div><div class='output co'>#&gt; List of 4
#&gt;  $ : num 1
#&gt;  $ : chr "bar"
#&gt;  $ : chr "bar"
#&gt;  $ : num 100</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#life-cycle">Life cycle</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

