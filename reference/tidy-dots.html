<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Collect dots tidily — tidy-dots • rlang</title>

<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min.js" integrity="sha256-hIvIxeqhGZF+VVeM55k0mJvWpQ6gTkWk3Emc+NmowYA=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Collect dots tidily — tidy-dots" />

<meta property="og:description" content="list2() is equivalent to list(...) but provides tidy
dots semantics:
You can splice other lists with the
unquote-splice !!! operator.
You can unquote names by using the unquote
operator !! on the left-hand side of :=.
" />

<meta property="og:description" content="We call quasiquotation support in dots tidy dots semantics and
functions taking dots with list2() tidy dots functions.
Quasiquotation is an alternative to do.call() idioms and gives
the users of your functions an uniform syntax to supply a variable
number of arguments or a variable name.
dots_list() is a lower-level version of list2() that offers
additional parameters for dots capture." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rlang</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../reference/lifecycle.html">Life cycle</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/rlang">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Collect dots tidily</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/rlang/blob/master/R/dots.R'><code>R/dots.R</code></a>, <a href='https://github.com/r-lib/rlang/blob/master/R/vec-new.R'><code>R/vec-new.R</code></a></small>
    <div class="hidden name"><code>tidy-dots.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>list2()</code> is equivalent to <code>list(...)</code> but provides tidy
dots semantics:</p><ul>
<li><p>You can splice other lists with the
<a href='quasiquotation.html'>unquote-splice</a> <code>!!!</code> operator.</p></li>
<li><p>You can unquote names by using the <a href='quasiquotation.html'>unquote</a>
operator <code>!!</code> on the left-hand side of <code>:=</code>.</p></li>
</ul>

    <p>We call quasiquotation support in dots <strong>tidy dots</strong> semantics and
functions taking dots with <code>list2()</code> tidy dots functions.
Quasiquotation is an alternative to <code>do.call()</code> idioms and gives
the users of your functions an uniform syntax to supply a variable
number of arguments or a variable name.</p>
<p><code>dots_list()</code> is a lower-level version of <code>list2()</code> that offers
additional parameters for dots capture.</p>
    
    </div>

    <pre class="usage"><span class='fu'>dots_list</span>(<span class='no'>...</span>, <span class='kw'>.ignore_empty</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"trailing"</span>, <span class='st'>"none"</span>, <span class='st'>"all"</span>),
  <span class='kw'>.preserve_empty</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>.homonyms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"keep"</span>, <span class='st'>"first"</span>, <span class='st'>"last"</span>,
  <span class='st'>"error"</span>), <span class='kw'>.check_assign</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>list2</span>(<span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>Arguments to collect with <code>!!!</code> support.</p></td>
    </tr>
    <tr>
      <th>.ignore_empty</th>
      <td><p>Whether to ignore empty arguments. Can be one
of <code>"trailing"</code>, <code>"none"</code>, <code>"all"</code>. If <code>"trailing"</code>, only the
last argument is ignored if it is empty.</p></td>
    </tr>
    <tr>
      <th>.preserve_empty</th>
      <td><p>Whether to preserve the empty arguments that
were not ignored. If <code>TRUE</code>, empty arguments are stored with
<code><a href='missing_arg.html'>missing_arg()</a></code> values. If <code>FALSE</code> (the default) an error is
thrown when an empty argument is detected.</p></td>
    </tr>
    <tr>
      <th>.homonyms</th>
      <td><p>How to treat arguments with the same name. The
default, <code>"keep"</code>, preserves these arguments. Set <code>.homonyms</code> to
<code>"first"</code> to only keep the first occurrences, to <code>"last"</code> to keep
the last occurrences, and to <code>"error"</code> to raise an informative
error and indicate what arguments have duplicated names.</p></td>
    </tr>
    <tr>
      <th>.check_assign</th>
      <td><p>Whether to check for <code>&lt;-</code> calls passed in
dots. When <code>TRUE</code> and a <code>&lt;-</code> call is detected, a warning is
issued to advise users to use <code>=</code> if they meant to match a
function parameter, or wrap the <code>&lt;-</code> call in braces otherwise.
This ensures assignments are explicit.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of arguments. This list is always named: unnamed
arguments are named with the empty string <code>""</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Note that while all tidy eval <a href='quotation.html'>quoting functions</a> have
tidy dots semantics, not all tidy dots functions are quoting
functions. <code>list2()</code> is for standard functions, not quoting
functions.</p>
    
    <h2 class="hasAnchor" id="life-cycle"><a class="anchor" href="#life-cycle"></a>Life cycle</h2>

    
    <p>One difference of <code>dots_list()</code> with <code>list2()</code> is that it always
allocates a vector of names even if no names were supplied. In this
case, the names are all empty <code>""</code>. This is for consistency with
<code><a href='quotation.html'>enquos()</a></code> and <code><a href='quotation.html'>enexprs()</a></code> but can be quite costly when long lists
are spliced in the results. For this reason we plan to parameterise
this behaviour with a <code>.named</code> argument and possibly change the
default. <code>list2()</code> does not have this issue.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='quotation.html'>exprs()</a></code> for extracting dots without evaluation.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Let's create a function that takes a variable number of arguments:</span>
<span class='no'>numeric</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>...</span>) {
  <span class='no'>dots</span> <span class='kw'>&lt;-</span> <span class='fu'>list2</span>(<span class='no'>...</span>)
  <span class='no'>num</span> <span class='kw'>&lt;-</span> <span class='fu'>as.numeric</span>(<span class='no'>dots</span>)
  <span class='fu'><a href='set_names.html'>set_names</a></span>(<span class='no'>num</span>, <span class='fu'>names</span>(<span class='no'>dots</span>))
}
<span class='fu'>numeric</span>(<span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>)</div><div class='output co'>#&gt; [1] 1 2 3</div><div class='input'>
<span class='co'># The main difference with list(...) is that list2(...) enables</span>
<span class='co'># the `!!!` syntax to splice lists:</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>list</span>(<span class='fl'>2</span>, <span class='fl'>3</span>)
<span class='fu'>numeric</span>(<span class='fl'>1</span>, !!! <span class='no'>x</span>, <span class='fl'>4</span>)</div><div class='output co'>#&gt; [1] 1 2 3 4</div><div class='input'>
<span class='co'># As well as unquoting of names:</span>
<span class='no'>nm</span> <span class='kw'>&lt;-</span> <span class='st'>"yup!"</span>
<span class='fu'>numeric</span>(!!<span class='no'>nm</span> <span class='kw'>:=</span> <span class='fl'>1</span>)</div><div class='output co'>#&gt; yup! 
#&gt;    1 </div><div class='input'>

<span class='co'># One useful application of splicing is to work around exact and</span>
<span class='co'># partial matching of arguments. Let's create a function taking</span>
<span class='co'># named arguments and dots:</span>
<span class='no'>fn</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>data</span>, <span class='no'>...</span>) {
  <span class='fu'>list2</span>(<span class='no'>...</span>)
}

<span class='co'># You normally cannot pass an argument named `data` through the dots</span>
<span class='co'># as it will match `fn`'s `data` argument. The splicing syntax</span>
<span class='co'># provides a workaround:</span>
<span class='fu'>fn</span>(<span class='st'>"wrong!"</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>letters</span>)  <span class='co'># exact matching of `data`</span></div><div class='output co'>#&gt; [[1]]
#&gt; [1] "wrong!"
#&gt; </div><div class='input'><span class='fu'>fn</span>(<span class='st'>"wrong!"</span>, <span class='kw'>dat</span> <span class='kw'>=</span> <span class='no'>letters</span>)   <span class='co'># partial matching of `data`</span></div><div class='output co'>#&gt; [[1]]
#&gt; [1] "wrong!"
#&gt; </div><div class='input'><span class='fu'>fn</span>(<span class='no'>some_data</span>, !!!<span class='fu'>list</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>letters</span>))  <span class='co'># no matching</span></div><div class='output co'>#&gt; $data
#&gt;  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"
#&gt; [20] "t" "u" "v" "w" "x" "y" "z"
#&gt; </div><div class='input'>

<span class='co'># Empty arguments trigger an error by default:</span>
<span class='fu'>try</span>(<span class='fu'>fn</span>(, ))</div><div class='output co'>#&gt; list()</div><div class='input'>
<span class='co'># You can choose to preserve empty arguments instead:</span>
<span class='no'>list3</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>...</span>) <span class='fu'>dots_list</span>(<span class='no'>...</span>, <span class='kw'>.preserve_empty</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># Note how the last empty argument is still ignored because</span>
<span class='co'># `.ignore_empty` defaults to "trailing":</span>
<span class='fu'>list3</span>(, )</div><div class='output co'>#&gt; [[1]]
#&gt; 
#&gt; </div><div class='input'>
<span class='co'># The list with preserved empty arguments is equivalent to:</span>
<span class='fu'>list</span>(<span class='fu'><a href='missing_arg.html'>missing_arg</a></span>())</div><div class='output co'>#&gt; [[1]]
#&gt; 
#&gt; </div><div class='input'>

<span class='co'># Arguments with duplicated names are kept by default:</span>
<span class='fu'>list2</span>(<span class='kw'>a</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>a</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>b</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>b</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='fl'>5</span>, <span class='fl'>6</span>)</div><div class='output co'>#&gt; $a
#&gt; [1] 1
#&gt; 
#&gt; $a
#&gt; [1] 2
#&gt; 
#&gt; $b
#&gt; [1] 3
#&gt; 
#&gt; $b
#&gt; [1] 4
#&gt; 
#&gt; [[5]]
#&gt; [1] 5
#&gt; 
#&gt; [[6]]
#&gt; [1] 6
#&gt; </div><div class='input'>
<span class='co'># Use the `.homonyms` argument to keep only the first of these:</span>
<span class='fu'>dots_list</span>(<span class='kw'>a</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>a</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>b</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>b</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='fl'>5</span>, <span class='fl'>6</span>, <span class='kw'>.homonyms</span> <span class='kw'>=</span> <span class='st'>"first"</span>)</div><div class='output co'>#&gt; $a
#&gt; [1] 1
#&gt; 
#&gt; $b
#&gt; [1] 3
#&gt; 
#&gt; [[3]]
#&gt; [1] 5
#&gt; 
#&gt; [[4]]
#&gt; [1] 6
#&gt; </div><div class='input'>
<span class='co'># Or the last:</span>
<span class='fu'>dots_list</span>(<span class='kw'>a</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>a</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>b</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>b</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='fl'>5</span>, <span class='fl'>6</span>, <span class='kw'>.homonyms</span> <span class='kw'>=</span> <span class='st'>"last"</span>)</div><div class='output co'>#&gt; $a
#&gt; [1] 2
#&gt; 
#&gt; $b
#&gt; [1] 4
#&gt; 
#&gt; [[3]]
#&gt; [1] 5
#&gt; 
#&gt; [[4]]
#&gt; [1] 6
#&gt; </div><div class='input'>
<span class='co'># Or raise an informative error:</span>
<span class='fu'>try</span>(<span class='fu'>dots_list</span>(<span class='kw'>a</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>a</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>b</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>b</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='fl'>5</span>, <span class='fl'>6</span>, <span class='kw'>.homonyms</span> <span class='kw'>=</span> <span class='st'>"error"</span>))


<span class='co'># dots_list() can be configured to warn when a `&lt;-` call is</span>
<span class='co'># detected:</span>
<span class='no'>my_list</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>...</span>) <span class='fu'>dots_list</span>(<span class='no'>...</span>, <span class='kw'>.check_assign</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'>my_list</span>(<span class='no'>a</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Using `&lt;-` as argument is often a mistake.</span>
#&gt; <span class='warning'>Do you need to use `=` to match an argument?</span>
#&gt; <span class='warning'></span>
#&gt; <span class='warning'>If you really want to use `&lt;-`, please wrap in braces:</span>
#&gt; <span class='warning'></span>
#&gt; <span class='warning'>  # Bad:</span>
#&gt; <span class='warning'>  fn(a &lt;- 1)</span>
#&gt; <span class='warning'></span>
#&gt; <span class='warning'>  # Good:</span>
#&gt; <span class='warning'>  fn(a = 1)       # Match 1 to parameter `a`</span>
#&gt; <span class='warning'>  fn({ a &lt;- 1 })  # Assign 1 to variable `a`</span></div><div class='output co'>#&gt; [[1]]
#&gt; [1] 1
#&gt; </div><div class='input'>
<span class='co'># There is no warning if the assignment is wrapped in braces.</span>
<span class='co'># This requires users to be explicit about their intent:</span>
<span class='fu'>my_list</span>({ <span class='no'>a</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span> })</div><div class='output co'>#&gt; [[1]]
#&gt; [1] 1
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#life-cycle">Life cycle</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

